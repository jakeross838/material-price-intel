---
phase: 11-material-catalog
plan: 03
type: execute
wave: 2
depends_on: ["11-01"]
files_modified:
  - material-price-intel/src/components/catalog/MaterialCard.tsx
  - material-price-intel/src/components/catalog/MaterialImageGallery.tsx
  - material-price-intel/src/components/catalog/MaterialDocumentList.tsx
  - material-price-intel/src/components/catalog/CategoryFilter.tsx
autonomous: true

must_haves:
  truths:
    - "Material card shows product image, name, price range, and key specs"
    - "Image gallery displays multiple angles/options with lightbox navigation"
    - "Documents list shows spec sheets and install guides viewable inline or downloadable"
    - "Category filter allows browsing materials by category"
  artifacts:
    - path: "material-price-intel/src/components/catalog/MaterialCard.tsx"
      provides: "Visual card component showing material image, name, price range, key specs"
      min_lines: 40
    - path: "material-price-intel/src/components/catalog/MaterialImageGallery.tsx"
      provides: "Image gallery with thumbnail strip and enlarged view"
      min_lines: 50
    - path: "material-price-intel/src/components/catalog/MaterialDocumentList.tsx"
      provides: "Document list with type badges and download/view links"
      min_lines: 30
    - path: "material-price-intel/src/components/catalog/CategoryFilter.tsx"
      provides: "Horizontal category filter bar with active state"
      min_lines: 20
  key_links:
    - from: "MaterialCard.tsx"
      to: "MaterialImage type"
      via: "import from types"
      pattern: "import.*MaterialImage"
    - from: "MaterialImageGallery.tsx"
      to: "images prop"
      via: "parent passes pre-resolved image URLs as props"
      pattern: "images:\\s*Array<"
---

<objective>
Build the reusable UI components for the material catalog. These are presentational components that receive data via props -- they do NOT call hooks directly. The parent page (Plan 04) wires hooks to these components.

Purpose: Clean separation of concerns. These components will be reused in the public catalog page, the admin materials page, and the Dream Home Designer (Phase 12). Building them as pure presentational components maximizes reusability.

Output: Four React components in a new catalog/ components directory.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-material-catalog/11-01-SUMMARY.md

@material-price-intel/src/lib/types.ts
@material-price-intel/src/lib/categorySpecTemplates.ts
@material-price-intel/src/components/projects/SelectionImagePanel.tsx
@material-price-intel/src/components/ui/card.tsx
@material-price-intel/src/components/ui/button.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create MaterialCard and CategoryFilter components</name>
  <files>material-price-intel/src/components/catalog/MaterialCard.tsx, material-price-intel/src/components/catalog/CategoryFilter.tsx</files>
  <action>
**MaterialCard.tsx:**

A visual card component for displaying a material in the catalog grid. Props:

```typescript
type MaterialCardProps = {
  material: {
    id: string;
    canonical_name: string;
    species: string | null;
    dimensions: string | null;
    grade: string | null;
    category_attributes: Record<string, unknown>;
  };
  category?: { name: string; display_name: string } | null;
  primaryImage?: { image_url: string; thumbnail_url: string | null } | null;
  priceRange?: { min: number | null; max: number | null } | null;
  onClick?: () => void;
};
```

Design:
- Fixed aspect ratio card (roughly 3:4) with the image taking up top 60%, info below
- Image area: Show primaryImage if available, else a placeholder with Package icon (from lucide) and muted background
- Below image: material canonical_name (font-medium, truncate if long), category badge (small rounded pill), price range (e.g., "$4.35 - $6.80 /pc") if priceRange provided, else "Price TBD"
- Show 1-2 key specs as small text below name if species or dimensions exist (e.g., "SPF | 2x4x8")
- Hover state: subtle shadow elevation, slight scale-up transition
- onClick handler makes the card clickable (cursor-pointer, focus ring)

Use shadcn Card component as the base. Use Tailwind for all styling. Import lucide icons as needed.

IMPORTANT: This is a presentational component. It does NOT fetch data -- it receives everything via props. This enables reuse in both authenticated and public contexts.

**CategoryFilter.tsx:**

A horizontal filter bar showing material categories as pills/tabs. Props:

```typescript
type CategoryFilterProps = {
  categories: Array<{ id: string; name: string; display_name: string }>;
  activeId: string | null; // null = "All" selected
  onSelect: (categoryId: string | null) => void;
};
```

Design:
- Horizontal scrollable row of rounded pill buttons
- First pill is "All" (selected when activeId is null)
- Each category pill shows display_name
- Active pill: primary background, white text
- Inactive pill: muted background, muted text, hover effect
- Overflow: horizontal scroll with hidden scrollbar (scrollbar-hide)
- Use Button component with variant="ghost" or custom className overrides
  </action>
  <verify>Run `cd material-price-intel && npx tsc --noEmit` to verify compilation.</verify>
  <done>MaterialCard renders image + name + price range + specs as a clickable visual card. CategoryFilter renders horizontal scrollable category pills with active state. Both are presentational (props-only). TypeScript compiles.</done>
</task>

<task type="auto">
  <name>Task 2: Create MaterialImageGallery and MaterialDocumentList</name>
  <files>material-price-intel/src/components/catalog/MaterialImageGallery.tsx, material-price-intel/src/components/catalog/MaterialDocumentList.tsx</files>
  <action>
**MaterialImageGallery.tsx:**

An image gallery component showing multiple material images with a main view and thumbnail strip. Props:

```typescript
type MaterialImageGalleryProps = {
  images: Array<{
    id: string;
    image_url: string;
    thumbnail_url: string | null;
    caption: string | null;
    source: string | null;
  }>;
  materialName: string; // for alt text
};
```

Design:
- Main image area: Large display of the selected image (aspect-video or aspect-[4/3])
- Thumbnail strip below: horizontal row of small square thumbnails, active one has a primary border ring
- Click a thumbnail to select it as the main view
- If only one image, hide the thumbnail strip
- If no images, show a placeholder (Package icon, "No images available" text)
- Main image: rounded corners, object-cover, click to open in new tab (ExternalLink icon overlay on hover)
- Caption text below main image (text-xs text-muted-foreground) if the selected image has a caption
- Source attribution (text-[10px]) if source is available

State management: useState for selectedIndex, default 0.

The images prop contains pre-resolved URLs passed by the parent component. Use image_url directly for the main view. If thumbnail_url exists, use it for the thumbnail strip (smaller/faster). No hook import needed -- the parent resolves URLs before passing them as props.

**MaterialDocumentList.tsx:**

A list component showing documents (spec sheets, install guides, etc.) linked to a material. Props:

```typescript
type MaterialDocumentListProps = {
  documents: Array<{
    id: string;
    title: string;
    doc_url: string;
    doc_type: string;
    file_size_bytes: number | null;
  }>;
};
```

Design:
- Vertical list of document rows, each with:
  - FileText icon (lucide)
  - Document title (text-sm, truncated)
  - Doc type badge (small pill, capitalize, color-coded: spec_sheet=blue, installation_guide=green, warranty=amber, others=gray)
  - File size (text-xs text-muted-foreground, formatted as KB/MB) if available
  - External link icon (opens in new tab)
- Each row is an `<a>` tag linking to doc_url with target="_blank"
- Hover state on rows (bg-muted/50)
- If no documents, show a placeholder with "No documents available"
- Group by doc_type with small section headers if there are documents of multiple types

Doc type color mapping:
- spec_sheet: blue-50/blue-700
- installation_guide: green-50/green-700
- cut_sheet: purple-50/purple-700
- warranty: amber-50/amber-700
- care_guide: teal-50/teal-700
- other: gray-50/gray-700

Helper function for formatting file sizes: `formatFileSize(bytes: number | null): string`
  </action>
  <verify>Run `cd material-price-intel && npx tsc --noEmit` to verify compilation.</verify>
  <done>MaterialImageGallery shows main image + thumbnail strip with selection state. MaterialDocumentList shows grouped documents with type badges, links, and file sizes. Both are presentational. TypeScript compiles.</done>
</task>

</tasks>

<verification>
- [ ] All four components exist in src/components/catalog/
- [ ] MaterialCard shows image, name, price range, key specs
- [ ] CategoryFilter shows horizontal pills with active state
- [ ] MaterialImageGallery shows main image + thumbnails with selection
- [ ] MaterialDocumentList shows documents grouped by type with badges
- [ ] All components are presentational (no direct hook calls for data fetching)
- [ ] `npx tsc --noEmit` passes
</verification>

<success_criteria>
Four reusable catalog UI components ready for composition in catalog pages. All are presentational (receive data via props) enabling reuse across authenticated admin pages, public catalog, and future Dream Home Designer. Visual design follows existing shadcn/Tailwind patterns in the codebase.
</success_criteria>

<output>
After completion, create `.planning/phases/11-material-catalog/11-03-SUMMARY.md`
</output>
